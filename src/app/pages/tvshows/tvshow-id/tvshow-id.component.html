<app-media-wrapper [media$]="tvshow$">
  <div mediaDetails>
    <ng-container *ngIf="tvshow$ | async as tvshow">
      <div class="flex items-center gap-2 text-slate-600">
        <div class="flex items-center gap-2">
          <lucide-icon [img]="starIcon" color="orange" size="14" />
          <span>{{ tvshow.data?.rating }}</span>
        </div>
        <span class="w-[1px] text-slate-400">|</span>
        <span>{{ tvshow.data?.seasons }} seasons</span>
        <span class="w-[1px] text-slate-400">|</span>
        <span>{{ tvshow.data?.episodes }} episodes</span>
        <span class="w-[1px] text-slate-400">|</span>
        <span>{{ tvshow.data?.genres?.join(', ') }}</span>
      </div>
      <p>{{ tvshow.data?.overview }}</p>
      <ng-container *ngIf="tvshowVideos$ | async as videoMedia">
        <button
          hlmBtn
          class="gap-2 w-32"
          [disabled]="!videoMedia.data?.url || videoMedia.isLoading"
          (click)="showDialog()"
        >
          <ng-container *ngIf="videoMedia.isLoading">Loading...</ng-container>
          <ng-container *ngIf="!videoMedia.isLoading">
            <lucide-icon [img]="clapperboardIcon" color="white" size="16" />
            <span>Play Trailer</span>
          </ng-container>
        </button>
      </ng-container>
      <p-dialog
        header="Trailer"
        [(visible)]="visible"
        [modal]="true"
        [style]="{ width: '50vw' }"
        [draggable]="false"
        [resizable]="false"
        [dismissableMask]="true"
      >
        <ng-container *ngIf="tvshowVideos$ | async as videoMedia">
          <iframe
            *ngIf="videoMedia.data?.url"
            [src]="videoMedia.data?.url"
            width="100%"
            height="315"
            frameborder="0"
            allowfullscreen
          >
          </iframe>
        </ng-container>
      </p-dialog>
    </ng-container>
  </div>
  <app-cast-slider castDetails [castState$]="tvshowCredits$" />
  <app-media-slider recommendations [mediaState$]="tvshowRecommendations$" />
</app-media-wrapper>
